var tt=Object.defineProperty,st=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var Ce=(r,e,s)=>e in r?tt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,ae=(r,e)=>{for(var s in e||(e={}))it.call(e,s)&&Ce(r,s,e[s]);if(Ae)for(var s of Ae(e))rt.call(e,s)&&Ce(r,s,e[s]);return r},ke=(r,e)=>st(r,at(e));import{b as ot,a as Fe,P as V,B as Ge,c as Le,d as ue,e as lt,C as nt,T as ht,m as ct,r as F,t as N,j as Me,o as dt,f as Pe,g as pt,R as ut,h as yt}from"./vendor.e0c6be48.js";const mt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&t(p)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}};mt();window.Buffer=ot.Buffer;const G=Fe.create({baseURL:"https://api.sisterverse.xyz/v1/",withCredentials:!0});function B({max:r,min:e}){const s=r-e;return Math.random()*s+e}const Ne={Utopia:["Utopia, a once paradise.","","","Don\u2019t be fooled by the name, as planet Utopia is far from paradise in its current state. It is said that Planet Utopia was abandoned during the first universal collapse, as the land, although sturdy enough for settlements, is still threatened by the environmental dangers that caused the collapse in total. Fortunately, planet Utopia and planet Oxonia experience much more manageable conditions, with a lesser prospect of hazardous risks. Thus, the SolSisters seized the barren, forsaken land, and are here to put down their roots.","","Collect the leaves while avoiding the falling asteroids"],Oxonia:["Oxonia, an icy tundra.","","","Once upon a time, planet Oxonia was a progressive, energetic planet with a thriving civilization. Unfortunately, at some point during the first universal collapse, everyone and everything was completely wiped out by a deadly blizzard \u2014 a result of the climate crisis originating from planet Earth. Fortunately, planet Oxonia experiences much more manageable conditions, with a lesser prospect of hazardous risks. Thus, the SolSisters seized the barren, forsaken land, and are here to put down their roots.","","Collect the litter while avoiding the rocks and trees"],Theronus:["Theronus, the tidal planet.","","","Don\u2019t let the stunning ocean blues and white sandy beaches deceive you \u2014 this planet was left in complete disarray by the humans that fled. Churlishly discarding trash and litter everywhere, as they hastily tried to escape the extreme weather conditions that planet Theronus is so vulnerable to. Combined with driftwood & other remnants of the menacing winds & tsunami waves, planet Theronus is in dire need of SolSisters intervention. What once was considered one of the great wonders of the world, now appears to be a complete wasteland; deplorably damaged and utterly wrecked.","","Collect the litter while avoiding the rocks and trees"],"W-46b":["W-46b, the ocean planet.","","","known as the infamous \u201Cunderwater\u201D planet\u2026SolSister pioneers traveling by Capsule Pods discovered this extraordinary planet while journeying towards the Sister Base planets, however, several SolSisters sadly did not make it home. Despite it\u2019s majestically enchanting qualities, this underwater planet is threatened by all sorts of dangers \u2014 some far too severe to survive \u2013 at least without the proper equipment. And yet still, the Capsule Pods can only persevere for so long before one of the evil, unpredictable perils of this volatile planet takes control.","","Collect coral while avoiding the sea mines and fish"],Lithonite:["Lithonite, the jungle planet.","","","Tall, towering trees, exotic babel coming from mysterious, sublime species, and the tranquil sounds of water falling make this planet beautifully unpredictable. It is unknown what lies deep within the Lithonite rainforest, as no man has ever made it out alive\u2026 However, the reputation of planet Lithonite precedes itself\u2026And it is now up to the Sisterhood to save the endangered species at risk, and combat the evil forces that prohibit this planet\u2019s ecosystem from thriving.","","Collect flowers while avoiding the exotic creatures"]},L={rarity:"0.01",boost:{"Player Size":.7,"Player Speed":1.3,"Boost Regeneration":1.3,Shield:1.3,"Wave Duration":.7,"Resource Size":1.3,"Resource Spawn":1.3,"Obstacle Size":.7,"Obstacle Spawn":.7}},ft={background:{"Pink Summer":{rarity:"17"},"Mystery Mint":{rarity:"25"},"Lilac Sunset":{rarity:"14"},"Neon Nature":{rarity:"10"},Cherry:{rarity:"12"},"Sol City":{boost:{"Obstacle Spawn":.9,planet:"Sol"},rarity:"9"},"Utopian Dream":{boost:{"Resource Spawn":1.1,planet:"Utopia"},rarity:"7.5"},"Retro Paradise":{boost:{"Obstacle Size":.9},rarity:"2"},Spaceship:{boost:{"Player Size":.7,planet:"Utopia"},rarity:"0.2"},"Night Sky":{boost:{"Resource Size":1.1},rarity:"3.3"}},specialitem_bg:{"Flame thrower":{boost:{"Obstacle Size":.9,planet:"Oxonia"},rarity:"6"},"Battle Axe":{boost:{"Obstacle Size":.9,planet:"Lithonite"},rarity:"12"},Jetpack:{boost:{"Player Speed":1.3,planet:"Utopia"},rarity:"1"},"Saumrai Sword":{boost:{"Obstacle Spawn":.9},rarity:"5"},Halo:{boost:{Shield:1.3,planet:"Sol"},rarity:"0.9"},"Angel Wings":{boost:{"Boost Regeneration":1.3},rarity:"0.1"},"Light Saber Red":{rarity:"20"},"Light Saber Blue":{rarity:"10"},Rainbow:{boost:{"Boost Regeneration":1.1,planet:"Theronus"},rarity:"5"},None:{rarity:"40"}},skin:{"Pale Ivory":{rarity:"17.14"},Beige:{rarity:"17.14"},Olive:{rarity:"17.14"},Umber:{rarity:"17.14"},Almond:{rarity:"17.14"},Blue:{boost:{"Player Speed":1.2,planet:"W-46b"},rarity:"1"},Silver:{boost:{"Player Speed":1.1,planet:"One"},rarity:"5"},Bumblebee:{boost:{"Player Speed":1.1,planet:"Lithonite"},rarity:"8"},Green:{boost:{"Player Speed":1.3,planet:"Ethonia"},rarity:"0.3"}},tattoo:{Eyebrow:{boost:{"Boost Regeneration":1.1},rarity:"1"},Teardrop:{boost:{"Wave Duration":.9},rarity:"2"},Robot:{boost:{"Player Speed":1.1,planet:"One"},rarity:"9"},"Cyber Arm":{boost:{Shield:1.2},rarity:"3"},None:{rarity:"85"}},mouth:{"Red Lips Resting":{rarity:"10"},"Silver Lips Resting":{rarity:"5"},"Purple Lips Resting":{rarity:"8"},"Black Lips Resting":{rarity:"7"},"Green Lips Resting":{rarity:"6"},"Blue Lips Resting":{rarity:"2"},"Red Lips bite":{rarity:"6"},"Black Lips Bite":{rarity:"5"},"Blue Lips Bite":{rarity:"4"},"Green Lips Bite":{rarity:"4"},"Purple Lips Bite":{rarity:"4"},"Silver Lips Bite":{rarity:"3"},"Red Lips Open":{rarity:"8"},"Green Lips Open":{rarity:"5"},"Blue Lips Open":{rarity:"4"},"Black Lips Open":{rarity:"3"},"Silver Lips Open":{rarity:"1"},"Purple Lips Open":{rarity:"3"},"Red Lips Grillz":{rarity:"5"},"Black Lips Grillz":{rarity:"3"},"Green Lips Grillz":{rarity:"1"},"Silver Lips Grillz":{rarity:"0.3"},"Blue Lips Grillz":{rarity:"0.7"},"Purple Lips Grillz":{rarity:"2"}},eyes:{Laser:{rarity:"10"},Green:{rarity:"20"},Purple:{rarity:"18"},Hypnotic:{rarity:"9"},Black:{rarity:"35.8"},Void:{boost:{"Player Size":.9},rarity:"5"},"Sol Eyes":{boost:{"Player Size":1.2,planet:"Sol"},rarity:"2"},Cyclops:{boost:{"Resource Spawn":1.3},rarity:"0.2"}},hair:{"Short Bob Black":{rarity:"10"},"Short Bob White":{rarity:"3"},"Short Bob Pink":{rarity:"2"},"Short Bob Blue":{rarity:"2"},"Short Bob Red":{rarity:"4"},"Short Bob Green":{rarity:"5"},"Dreadlocks Black":{rarity:"5"},"Dreadlocks Purple":{rarity:"4"},"Dreadlocks Green":{rarity:"3"},"Princess Leia Buns":{rarity:"1"},Cleopatra:{rarity:"1"},"Pony-tail":{rarity:"5"},"Dual-tone Blue":{rarity:"11"},"Dual-tone Red":{rarity:"3"},"Dual-tone Green":{rarity:"4"},"Straight Black":{rarity:"15"},"Striaght White":{rarity:"5"},"Straight Pink":{rarity:"2"},"Striaght Blue":{rarity:"2"},"Striaght Red":{rarity:"2"},"Straight Green":{rarity:"2"},"Buzzcut Beige":{rarity:"7.7"},"Buzzcut Hot Pink":{rarity:"0.3"},"Buzzcut Blue":{rarity:"1"}},accessory:{"Single Stud":{rarity:"20"},"Double Stud":{rarity:"10"},"Single Sol Earring":{boost:{"Resource Size":1.1,planet:"Sol"},rarity:"5"},"Double Sol Earring":{boost:{"Resource Spawn":1.1,planet:"Sol"},rarity:"3"},"Eyebrow Piercing":{rarity:"3"},"Choker Black":{rarity:"10"},"Choker Green":{boost:{"Obstacle Size":.9,planet:"Ethonia"},rarity:"3"},"Septum Piercing":{rarity:"8"},"Amulet Necklace":{rarity:"7"},"Face Mask":{boost:{Shield:1.1,planet:"Electra"},rarity:"1"},"Extream Mask":{rarity:"5"},None:{rarity:"25"}},clothes:{"Puffer Jacket Orange":{rarity:"16"},"Leather Jacket":{rarity:"21"},"Denim Cut-off":{rarity:"18"},"Latex Catsuit Red":{boost:{"Player Size":.8},rarity:"1"},"Sol Suit":{boost:{"Player Size":.7,planet:"Sol"},rarity:"0.5"},"Zipper Suit Orange":{rarity:"6"},"Zipper Suit Blue":{rarity:"8"},"Bomber Jacket":{rarity:"15.5"},"Puffer Jacket Blue":{boost:{Shield:1.1,planet:"Oxonia"},rarity:"6.5"},"Latex Catsuit Black":{boost:{"Player Speed":1.2,planet:"W-46b"},rarity:"1.5"},"Puffer Jacket Pink":{boost:{Shield:1.1,planet:"Oxonia"},rarity:"6"}},eyewear:{"Goggles Black":{boost:{"Obtsacle Size":.9,planet:"Electra"},rarity:"10"},"Visor Pink":{boost:{"Resource Size":1.1},rarity:"3"},"Visor Blue":{boost:{"Obstacle Spawn":.9,planet:"W-46b"},rarity:"5"},"Warrior Mask":{boost:{Shield:1.3},rarity:"0.4"},"Goggles White":{boost:{"Obstacle Size":.9,planet:"Oxonia"},rarity:"6"},"Sol Glasses":{boost:{"Obstacle Spawn":.7,planet:"Sol"},rarity:"0.1"},None:{rarity:"75.5"}},hat:{Halo:{boost:{Shield:1.3},rarity:"0.7"},"Golden Tiara":{boost:{"Player Size":.9},rarity:"2.1"},"Silver Tiara":{boost:{"Player Size":.9,planet:"One"},rarity:"4"},"Sol Tiara":{boost:{"Player Size":.7,planet:"Sol"},rarity:"0.2"},"Sol Helmet":{boost:{Shield:1.1,planet:"Sol"},rarity:"12"},Horns:{rarity:"13"},"Space Cowboy":{boost:{"Player Speed":1.1,planet:"Utopia"},rarity:"8"},None:{rarity:"60"}},special_item:{"Sol Snake":{boost:{"Player Speed":1.4,planet:"Lithonite"},rarity:"0.35"},"Trident ":{boost:{"Obstacle Size":.8,planet:"W-46b"},rarity:"1"},Gaunlet:{boost:{Shield:1.1},rarity:"12"},"Nucleus Blue":{boost:{"Boost Regeneration":1.2},rarity:"2"},"Nucleus Pink":{boost:{"Boost Regeneration":1.1},rarity:"4"},None:{rarity:"80.65"}},Goddess:{"Twin Goddesses":L,"Water Goddess":L,"Sky Goddess":L,"Phoenix Goddess":L,"Nature Goddess":L,"Moon Goddess":L,"Earth Goddess":L,"Air Goddess":L,"Sun Goddess":L,"Rainbow Goddess":L}},gt={Sky:{Night:{rarity:"28.36"},"Starry Night":{boost:{"Player Size":.9},rarity:"7.96"},Clear:{rarity:"35.11"},Sandstorm:{boost:{"Wave Duration":1.1,planet:"Electra"},rarity:"28.02"},"Cyber Sun":{boost:{"Boost Regeneration":1.1},rarity:"0.26"},Sol:{boost:{"Resource Spawn":1.1,planet:"Sol"},rarity:"0.29"}},Terrain:{Island:{boost:{"Player Speed":1.1,planet:"Theronus"},rarity:"32.11"},Desert:{boost:{"Player Speed":1.1,planet:"Electra"},rarity:"44.81"},City:{boost:{"Player Speed":1.1,planet:"One"},rarity:"5.67"},Vegetation:{boost:{"Player Speed":1.1,planet:"Lithonite"},rarity:"16.32"},"Planet Sol":{boost:{"Player Speed":1.2,planet:"Sol"},rarity:"1.09"}},Pod:{"Mustard Spaceship":{boost:{"Player Speed":1.1,planet:"Utopia"},rarity:"1.69"},"Grey Tower":{rarity:"3.02"},"Grey Sphere":{rarity:"5.58"},"Red Capsule":{rarity:"2.21"},"Mustard Semi-sphere":{rarity:"13.67"},"Grey Semi-sphere":{rarity:"10.62"},"Blue Sphere":{rarity:"5.28"},"Blue Semi-sphere":{rarity:"5.86"},"Mustard Sphere":{rarity:"13.11"},"Blue Spaceship":{boost:{"Player Speed":1.1,planet:"Utopia"},rarity:"1.19"},"Mustard Capsule":{rarity:"8.62"},"Mustard Tower":{rarity:"5.55"},"Grey Capsule":{rarity:"5.07"},"Blue Tower":{rarity:"2.23"},"Sol Tower":{boost:{"Player Size":1.2,planet:"One"},rarity:"0.32"},"Obsidian Sphere":{boost:{Shield:1.2},rarity:"0.61"},"Red Sphere":{rarity:"2.28"},"Obsidian Spaceship":{boost:{"Player Size":.8,planet:"Utopia"},rarity:"0.35"},"Blue Capsule":{boost:{"Player Speed":1.1,planet:"W-46b"},rarity:"3.84"},"Red Spaceship":{boost:{"Player Speed":1.1,planet:"Utopia"},rarity:"1.08"},"Grey Spaceship":{boost:{"Player Speed":1.1,planet:"Utopia"},rarity:"1.24"},"Red Semi-sphere":{rarity:"2.73"},"Obsidian Semi-sphere":{rarity:"1.20"},"Obsidian Capsule":{boost:{"Player Speed":1.2,planet:"W-46b"},rarity:"0.39"},"Obsidian Tower":{boost:{Shield:1.2,planet:"One"},rarity:"0.30"},"Sol Semi-sphere":{rarity:"0.27"},"Red Tower":{rarity:"0.98"},"Sol Capsule":{boost:{"Player Speed":1.2,planet:"W-46b"},rarity:"0.34"},"Sol Sphere":{rarity:"0.24"},"Sol Spaceship":{boost:{"Player Size":.7,planet:"Sol"},rarity:"0.13"}},Facade:{"Spaceship Hexagon Panel":{rarity:"1.04"},"Tower Hexagon Panel":{rarity:"2.09"},"Sphere Full Panel":{rarity:"4.93"},"Capsule Hexagon Panel":{rarity:"3.16"},"Semi-sphere Hexagon Panel":{rarity:"5.14"},"Semi-sphere Abstract Panel":{rarity:"6.32"},"Sphere Defense Mechanism":{rarity:"4.72"},"Semi-sphere Full Panel":{rarity:"5.86"},"Semi-sphere Defense Mechanism":{rarity:"5.26"},"Sphere Hexagon Panel":{rarity:"4.14"},"Sphere Split Panel":{rarity:"4.57"},"Spaceship Attack Mechanism":{rarity:"0.95"},"Capsule Full Panel":{rarity:"3.39"},"Semi-sphere Attack Mechanism":{rarity:"5.54"},"Semi-sphere Split Panel":{rarity:"6.24"},"Tower Split Panel":{rarity:"2.04"},"Capsule Attack Mechanism":{rarity:"3.51"},"Sphere Abstract Panel":{rarity:"4.22"},"Capsule Defense Mechanism":{rarity:"3.50"},"Capsule Abstract":{rarity:"3.74"},"Tower Defense Mechanism":{rarity:"1.94"},"Sphere Attack Mechanism":{rarity:"4.53"},"Spaceship Defense Mechanism":{rarity:"1.03"},"Tower Full Panel":{rarity:"2.02"},"Spaceship Split Panel":{rarity:"0.93"},"Capsule Split Panel":{rarity:"3.16"},"Tower Abstract Panel":{rarity:"2.18"},"Tower Attack Mechanism":{rarity:"2.13"},"Spaceship Abstract Panel":{rarity:"0.87"},"Spaceship Full Panel":{rarity:"0.85"}},Atmosphere:{Sandstorm:{boost:{"Player Speed":1.2,planet:"Electra"},rarity:"2.78"},Clear:{rarity:"84.96"},Rain:{boost:{"Resource Size":1.1,planet:"Lithonite"},rarity:"12.16"},"Sol Rain":{boost:{"Resource Spawn":1.2,planet:"Sol"},rarity:"0.10"}},Frame:{Teal:{rarity:"31.05"},Gem:{rarity:"33.85"},Obsidian:{rarity:"20.85"},Platinum:{rarity:"9.08"},Gold:{boost:{"Boost Regeneration":1.1},rarity:"4.08"},Sol:{boost:{"Boost Regeneration":1.2,planet:"Sol"},rarity:"1.09"}},Citizen:{Merchants:{boost:{"Resource Spawn":1.1},rarity:"7.13"},Dreamers:{boost:{"Boost Regeneration":1.1},rarity:"9.24"},Builders:{boost:{"Player Size":.9},rarity:"14.09"},Planters:{boost:{"Resource Size":1.1},rarity:"10.50"},Defenders:{boost:{Shield:1.1},rarity:"4.38"},Healers:{boost:{"Obstacle Spawn":.9},rarity:"15.23"},Activists:{boost:{"Player Speed":1.1},rarity:"12.77"},Artists:{boost:{"Wave Duration":.9},rarity:"12.20"},Researchers:{boost:{"Obstacle Size":.9},rarity:"6.92"},Inventors:{boost:{"Boost Regeneration":1.1},rarity:"7.46"},Goddesses:{boost:{"Player Size":.9,"Player Speed":1.1,Shield:1.1,"Boost Regeneration":1.1,"Wave Duration":.9,"Resource Size":1.1,"Resource Spawn":1.1,"Obstacle Size":.9,"Obstacle Spawn":.9},rarity:"0.08"}},Sector:{Oxonia:{boost:{Shield:1.1,planet:"Oxonia"},rarity:"26.10"},Utopia:{boost:{Shield:1.1,planet:"Utopia"},rarity:"38.08"},Theronus:{boost:{Shield:1.1,planet:"Theronus"},rarity:"12.18"},Lithonite:{boost:{Shield:1.1,planet:"Lithonite"},rarity:"5.58"},"W-46b":{boost:{Shield:1.1,planet:"W-46b"},rarity:"11.46"},Electra:{boost:{Shield:1.1,planet:"Electra"},rarity:"4.69"},Ethonia:{boost:{Shield:1.2,planet:"Ethonia"},rarity:"1.06"},Sol:{boost:{Shield:1.2,planet:"Sol"},rarity:"0.71"},One:{boost:{Shield:1.3,planet:"One"},rarity:"0.14"}}},Te=window.Phaser,De={"player size":"Player Size","player speed":"Player Speed",damage:"Shield",boost_gen:"Boost Regeneration","resource size":"Resource Size","resource spawn":"Resource Spawn","obstacle size":"Obstacle Size","obstacle spawn":"Obstacle Spawn",wave_duration:"Wave Duration"};class bt extends Te.Scene{constructor(){super("intro")}preload(){this.load.audio("resource",["sounds/resource.ogg","sounds/resource.mp3"]),this.load.audio("game_over",["sounds/game_over.ogg","sounds/game_over.mp3"]);const e=a.planet.name.replace("-","").toLowerCase();this.load.audio("theme",[`sounds/${e}/theme.ogg`,`sounds/${e}/theme.m4a`,`sounds/${e}/theme.mp3`])}create(){this.sound.add("theme",{volume:.2,loop:!0}).play();const{width:s,height:t}=this.scale;var i=Ne[a.planet.name],o=this.make.graphics();o.fillRect(s/2-260,t/2-175,520,350);var p=new Te.Display.Masks.GeometryMask(this,o),c=this.add.text(s/2-260,t/2,i,{fontSize:"32px",fontFamily:"Gilroy Bold, sans-serif",color:"#fff",align:"justify",wordWrap:{width:510}}).setOrigin(0);c.setMask(p);const n=this.add.text(s/2+260,t/2+190,"SKIP",{fontSize:"32px",fontFamily:"Gilroy Bold, sans-serif",color:"#fff"});n.setInteractive({cursor:"pointer"}),n.on("pointerup",()=>this.scene.start(a.planet.name)),this.input.keyboard.on("keydown",()=>this.scene.start(a.planet.name)),this.time.addEvent({delay:15,callback:()=>{c.y-=.7,c.y<-500&&this.scene.start(a.planet.name)},loop:!0});const d=a.modifier;let m="Active Modifiers: ";for(const u in d)if(typeof d[u]=="object")for(const x in d[u])d[u][x]!=1&&(m=m.concat(`${De[`${u} ${x}`]}: ${d[u][x].toFixed(2)} `));else d[u]!=1&&(m=m.concat(`${De[u]}: ${d[u].toFixed(2)} `));const h=this.add.text(0,t/2+220,m,{fontSize:"16px",fontFamily:"Gilroy Bold, sans-serif",color:"#fff",wordWrap:{width:510}});h.setPosition(s/2-h.displayWidth/2,t/2+240)}}const I={fontFamily:'"Gilroy Bold", sans-serif',fontSize:"20px"};class ie{constructor(e,s,t,i){i?I.fill=i:I.fill="#fff",this.planet=s,this.boost_max=t,this.health_bar=e.add.graphics().setScrollFactor(0),this.health_text=e.add.text(20,16,"Health",I).setScrollFactor(0),this.boost_bar=e.add.graphics().setScrollFactor(0),this.boost_text=e.add.text(20,62,"Boost",I).setScrollFactor(0),this.progress_bar=e.add.graphics().setScrollFactor(0),this.progress_text=e.add.text(20,108,"Wave 1",I).setScrollFactor(0),this.scoreboard=e.add.text(130,16,"",I).setScrollFactor(0),this.health_bar.depth=1e3,this.health_text.depth=1e3,this.boost_bar.depth=1e3,this.boost_text.depth=1e3,this.progress_bar.depth=1e3,this.progress_text.depth=1e3,this.scoreboard.depth=1e3,e.input.keyboard.on("keydown-P",()=>a.pause()),e.input.keyboard.on("keydown-ESC",()=>a.pause()),e.input.gamepad.total===0?e.input.gamepad.once("connected",o=>{o.on("down",p=>{p==9&&a.pause()})}):e.input.gamepad.pad1.on("down",o=>{o==9&&a.pause()}),this.draw()}draw(){var i,o,p;const e=a.state.timer.getRemainingSeconds(),s=a.state.timer.getElapsedSeconds(),t=a.state.timer.paused?100:Math.floor(s/(e+s)*100);this.scoreboard.text=`Score: ${((i=a.state)==null?void 0:i.score)||0}		 Resources: ${((o=a.state)==null?void 0:o.resources)||0}		 Lives: ${(p=a.user)==null?void 0:p.lives}		 World: ${this.planet}`,this.progress_text.text=`Wave ${a.state.level}`,this.health_bar.fillStyle(16777215),this.health_bar.fillRect(20,44,100,16),this.boost_bar.fillStyle(16777215),this.boost_bar.fillRect(20,90,100,16),this.progress_bar.fillStyle(16777215),this.progress_bar.fillRect(20,136,100,16),a.state.health<30?this.health_bar.fillStyle(14354851):this.health_bar.fillStyle(10157912),this.health_bar.fillRect(20,44,a.state.health,16),this.boost_bar.fillStyle(10552316),this.boost_bar.fillRect(20,90,Math.floor(a.state.boost/this.boost_max*100),16),this.progress_bar.fillStyle(1527526),this.progress_bar.fillRect(20,136,t,16)}}const ye=window.Phaser;var R,T,j,Y,re,me,U,Ee,_;class wt extends ye.Scene{constructor(){super("Utopia")}spawnResource(){const{width:e,height:s}=this.scale;for(let t=0;t<Y.children.entries.length;t++)Y.children.entries[t].y>s&&Y.children.entries[t].destroy();Y.create(Math.floor(Math.random()*e),-50).setScale(B(_.resource.scale))}spawnObstacle(){const{width:e,height:s}=this.scale;for(let i=0;i<T.children.entries.length;i++)T.children.entries[i].y>s&&T.children.entries[i].destroy();var t=T.create(Math.floor(Math.random()*e),-50).setScale(B(_.obstacle.scale));t.setCircle(t.width/2-15,15,10)}nextLevel(){a.state.timer.paused=!0,j.paused=!0,re.paused=!0,me.paused=!0,setTimeout(()=>{a.state.level++,a.state.timer.delay=Math.floor(_.wave_time*1e3)+a.state.level*5e3,a.state.level>10&&a.conquer(),j.delay=Math.max(j.delay-25,80),console.log(j.delay),re.delay=Math.min(re.delay+20,1e4),a.state.timer.paused=!1,j.paused=!1,re.paused=!1,me.paused=!1},6e3)}preload(){this.load.atlas("utopia","img/utopia/sheet.png","img/utopia/sheet.json"),this.load.image("sister",`semi_sister/${a.sister.data.name.replace(" #","")}.png`),this.load.audio("explosion",["sounds/utopia/explosion.ogg","sounds/utopia/explosion.mp3"]),this.load.audio("theme",["sounds/utopia/theme.ogg","sounds/utopia/theme.m4a","sounds/utopia/theme.mp3"])}create(){const{width:e,height:s}=this.scale,t=a.modifier;_={wave_time:50*t.wave_duration,player:{scale:1*t.player.size,speed:400*t.player.speed},boost_max:180,boost_gen:t.boost_gen,damage:t.damage,resource:{scale:{max:1.3*t.resource.size,min:1.3*t.resource.size},spawn:3e3/t.resource.spawn,gravity:{x:0,y:70}},obstacle:{scale:{max:.8*t.obstacle.size,min:.2},spawn:300/t.obstacle.spawn,gravity:{x:0,y:100}}},a.state.timer=this.time.addEvent({delay:Math.floor(_.wave_time*1e3),callback:()=>{this.nextLevel()},loop:!0}),Ee=new ie(this,"Utopia",_.boost_max),this.bg=this.add.image(e/2,s/2,"utopia","stars.jpeg");let i=e/this.bg.width,o=s/this.bg.height;this.bg.setScale(Math.max(i,o));const p=this.sound.add("explosion",{volume:.4}),c=this.sound.add("resource"),n=this.sound.add("game_over");this.anims.create({key:"explode",frameRate:8,frames:this.anims.generateFrameNames("utopia",{prefix:"explosion-",suffix:".png",end:11})}),U=this.input.keyboard.createCursorKeys(),Y=this.physics.add.group({defaultKey:"utopia",defaultFrame:"leaf.png",gravityY:_.resource.gravity.y}),T=this.physics.add.group({defaultKey:"utopia",defaultFrame:"asteroid.png",gravityY:_.obstacle.gravity.y,bounceX:.6,bounceY:.6,frictionX:0,frictionY:0});var d=this.add.particles("utopia","red.png"),m=d.createEmitter({speed:100,scale:{start:1,end:0},blendMode:"ADD"});const h=new ye.GameObjects.Image(this,0,0,"utopia","alien_ship.png").setScale(1.8),u=new ye.GameObjects.Image(this,0,0,"sister").setScale(.6),x=new ye.GameObjects.RenderTexture(this,0,0,70,70);x.draw(h,35,42),x.draw(u,34,17),x.setVisible(!1),x.saveTexture("player"),R=this.physics.add.image(e/2,s/2,"player").setScale(_.player.scale),R.setCollideWorldBounds(!0),R.setCircle(R.width/2),m.startFollow(R),this.physics.add.collider(Y,R,function(y,P){a.state.resources++,a.state.score+=10,c.play(),P.destroy()}),this.physics.add.collider(T,R,(y,P)=>{const w=Math.floor(P.width*P.scale/3*_.damage);if(a.state.health-=w,a.state.score-=w,a.state.health<1){if(a.died()){R.setVisible(!1),this.physics.pause(),me.paused=!0,p.play();const se=this.add.sprite(R.x,R.y,"utopia","explosion-0.png").setScale(R.scaleX+1.6);se.play("explode").once("animationcomplete",()=>{se.destroy(),this.scene.pause(),n.play()})}}else{const se=this.add.sprite(P.x,P.y,"explosion").setScale(P.scaleX+.6);se.play("explode").once("animationcomplete",()=>{se.destroy()}),p.play(),P.destroy()}}),me=this.time.addEvent({delay:300,callback:()=>{a.state.score++},loop:!0}),re=this.time.addEvent({delay:_.resource.spawn,callback:()=>{this.spawnResource()},loop:!0}),j=this.time.addEvent({delay:_.obstacle.spawn,callback:()=>{this.spawnObstacle()},loop:!0})}update(){var s,t,i,o,p,c,n,d;const e=this.input.gamepad.pad1;if(U.up.isDown||(e==null?void 0:e.up)||((s=e==null?void 0:e.leftStick)==null?void 0:s.y)<0?R.setVelocityY(-_.player.speed*Math.abs(((t=e==null?void 0:e.leftStick)==null?void 0:t.y)||1)):U.down.isDown||(e==null?void 0:e.down)||((i=e==null?void 0:e.leftStick)==null?void 0:i.y)>0?R.setVelocityY(_.player.speed*Math.abs(((o=e==null?void 0:e.leftStick)==null?void 0:o.y)||1)):R.setVelocityY(0),U.left.isDown||(e==null?void 0:e.left)||((p=e==null?void 0:e.leftStick)==null?void 0:p.x)<0?R.setVelocityX(-_.player.speed*Math.abs(((c=e==null?void 0:e.leftStick)==null?void 0:c.x)||1)):U.right.isDown||(e==null?void 0:e.right)||((n=e==null?void 0:e.leftStick)==null?void 0:n.x)>0?R.setVelocityX(_.player.speed*Math.abs(((d=e==null?void 0:e.leftStick)==null?void 0:d.x)||1)):R.setVelocityX(0),U.space.isDown||(e==null?void 0:e.A)){if(a.state.boost>0){a.state.boost-=5;for(let m=0;m<T.children.entries.length;m++)T.children.entries[m].setVelocityY(T.children.entries[m].body.velocity.y-10)}}else a.state.boost=Math.min(_.boost_max,a.state.boost+1*_.boost_gen);Ee.draw()}}const fe=window.Phaser;var g,H,oe,q,le,ge,K,$e,z;const We=["hole","rock0","rock1","rock2","rock3","ice0","ice1","ice2","ice3","ice4"];class St extends fe.Scene{constructor(){super("Oxonia")}spawnResource(){const{width:e,height:s}=this.scale;for(let t=0;t<q.children.entries.length;t++)q.children.entries[t].x<0&&q.children.entries[t].destroy();q.create(e+this.cameras.main.scrollX+50,Math.floor(Math.random()*s+this.cameras.main.scrollY)).setScale(B(z.resource.scale))}spawnObstacle(){const{width:e,height:s}=this.scale;for(let o=0;o<H.children.entries.length;o++)H.children.entries[o].x<0&&H.children.entries[o].destroy();var t;const i=We[Math.floor(Math.random()*We.length)];t=H.create(e+this.cameras.main.scrollX+50,Math.floor(Math.random()*(2*s)-s/2+this.cameras.main.scrollY),"oxonia",`${i}.png`).setScale(B(z.obstacle.scale)),t.setCircle(t.body.halfWidth,0,t.body.halfHeight-t.body.halfWidth)}nextLevel(){a.state.timer.paused=!0,oe.paused=!0,le.paused=!0,ge.paused=!0,setTimeout(()=>{a.state.level++,a.state.timer.delay=Math.floor(z.wave_time*1e3)+a.state.level*5e3,a.state.level>10&&a.conquer(),oe.delay=Math.max(oe.delay-15,150),le.delay=Math.min(le.delay+20,1e4),a.state.timer.paused=!1,oe.paused=!1,le.paused=!1,ge.paused=!1},6e3)}preload(){this.load.atlas("oxonia","img/oxonia/sheet.png","img/oxonia/sheet.json"),this.load.image("sister",`semi_sister/${a.sister.data.name.replace(" #","")}.png`),this.load.audio("explosion",["sounds/utopia/explosion.ogg","sounds/utopia/explosion.mp3"]),this.load.audio("ice",["sounds/oxonia/ice.ogg","sounds/oxonia/ice.mp3"])}create(){const{width:e,height:s}=this.scale,t=a.modifier;z={wave_time:50*t.wave_duration,player:{scale:1*t.player.size,speed:400*t.player.speed},boost_max:180,boost_gen:t.boost_gen,damage:t.damage,resource:{scale:{max:1*t.resource.size,min:1*t.resource.size},spawn:3e3/t.resource.spawn,gravity:{x:0,y:0}},obstacle:{scale:{max:4.8*t.obstacle.size,min:2*t.obstacle.size},spawn:300/t.obstacle.spawn,gravity:{x:0,y:0}}},a.state.timer=this.time.addEvent({delay:Math.floor(z.wave_time*1e3),callback:()=>{this.nextLevel()},loop:!0}),$e=new ie(this,"Oxonia",z.boost_max,"#000"),this.bg=this.add.tileSprite(e/2,s/2,e,s,"oxonia","snow_map_small.png"),this.bg.setScrollFactor(0);const i=this.sound.add("explosion"),o=this.sound.add("ice"),p=this.sound.add("resource"),c=this.sound.add("game_over");this.anims.create({key:"explode",frameRate:8,frames:this.anims.generateFrameNames("oxonia",{prefix:"explosion-",suffix:".png",end:6})}),this.anims.create({key:"poof",frameRate:8,frames:this.anims.generateFrameNames("oxonia",{prefix:"poof-",suffix:".png",end:4})}),K=this.input.keyboard.createCursorKeys(),q=this.physics.add.group({defaultKey:"oxonia",defaultFrame:"wood.png"}),H=this.physics.add.group({defaultKey:"oxonia",defaultFrame:"ice0.png"});var n=this.add.particles("oxonia","snow.png"),d=n.createEmitter({speed:100,gravityY:-100,scale:{start:4,end:.2},blendMode:"ADD"});const m=new fe.GameObjects.Image(this,0,0,"oxonia","ripsaw.png").setScale(1.6),h=new fe.GameObjects.Image(this,0,0,"sister").setScale(.6),u=new fe.GameObjects.RenderTexture(this,0,0,125,76);u.draw(m,56,38),u.draw(h,77,16),u.setVisible(!1),u.saveTexture("player"),g=this.physics.add.image(e/2,s/2,"player").setScale(z.player.scale),g.setCollideWorldBounds(!0,1,0),g.setSize(120,56),g.setOffset(0,10),d.startFollow(g,-10,0),this.physics.add.collider(q,g,function(x,y){a.state.resources++,a.state.score+=10,p.play(),y.destroy()}),this.obstacle_collider=this.physics.add.collider(H,g,(x,y)=>{const P=Math.floor(y.width*y.scale/3*z.damage);if(a.state.health-=P,a.state.score-=P,a.state.health<1){if(a.died()){g.setVisible(!1),this.physics.pause(),ge.paused=!0,i.play();const w=this.add.sprite(g.x,g.y,"oxonia","explosion-0.png").setScale(g.scaleX+2.6);w.play("explode").once("animationcomplete",()=>{w.destroy(),this.scene.pause(),c.play()})}}else{const w=this.add.sprite(y.x,y.y,"oxonia","poof-0.png").setScale(y.scaleX+1.6);w.play("poof").once("animationcomplete",()=>{w.destroy()}),o.play(),y.destroy()}}),ge=this.time.addEvent({delay:300,callback:()=>{a.state.score++},loop:!0}),le=this.time.addEvent({delay:z.resource.spawn,callback:()=>{this.spawnResource()},loop:!0}),oe=this.time.addEvent({delay:z.obstacle.spawn,callback:()=>{this.spawnObstacle()},loop:!0})}update(){var s,t,i,o,p,c;this.bg.tilePositionX+=3,this.cameras.main.scrollX+=3,g.y<this.cameras.main.scrollY+200?(this.bg.tilePositionY-=1,this.cameras.main.scrollY-=1):g.y>this.cameras.main.scrollY+this.scale.height-200&&(this.bg.tilePositionY+=1,this.cameras.main.scrollY+=1),this.physics.world.setBounds(this.cameras.main.scrollX,this.cameras.main.scrollY,this.scale.width,this.scale.height);const e=this.input.gamepad.pad1;K.up.isDown||(e==null?void 0:e.up)||((s=e==null?void 0:e.leftStick)==null?void 0:s.y)<0?(g.setVelocityY(-(z.player.speed-50)*Math.abs(((t=e==null?void 0:e.leftStick)==null?void 0:t.y)||1)),g.setAngle(-5)):K.down.isDown||(e==null?void 0:e.down)||((i=e==null?void 0:e.leftStick)==null?void 0:i.y)>0?(g.setVelocityY((z.player.speed-50)*Math.abs(((o=e==null?void 0:e.leftStick)==null?void 0:o.y)||1)),g.setAngle(5)):(g.setAngle(0),g.setVelocityY(0)),K.left.isDown||(e==null?void 0:e.left)||((p=e==null?void 0:e.leftStick)==null?void 0:p.x)<0?g.setVelocityX(Math.max(g.body.velocity.x-40,-z.player.speed)):K.right.isDown||(e==null?void 0:e.right)||((c=e==null?void 0:e.leftStick)==null?void 0:c.x)>0?g.x<this.cameras.main.scrollX+100?g.setVelocityX(500):g.setVelocityX(Math.min(g.body.velocity.x+40,z.player.speed)):g.setVelocityX(g.body.velocity.x>0?Math.max(g.body.velocity.x-20,0):Math.min(g.body.velocity.x+20,0)),(K.space.isDown||(e==null?void 0:e.A))&&a.state.boost==z.boost_max?(a.state.boost=0,g.setAlpha(.4),this.obstacle_collider.active=!1,this.tweens.add({targets:g,alpha:{value:1,duration:150,ease:"Power1",delay:4e3},yoyo:!0,repeat:8,onComplete:()=>{g.clearAlpha(),this.obstacle_collider.active=!0}})):a.state.boost=Math.min(z.boost_max,a.state.boost+.3*z.boost_gen),$e.draw()}}const be=window.Phaser;var f,W,ne,C,he,we,J,Xe,A;const Ve=["rock0","rock1","rock2","rock3","rock4"],Ie=["sand_rock","palm_tree"],je=["trash1","trash2","trash3"];class xt extends be.Scene{constructor(){super("Theronus")}spawnResource(){const{width:e,height:s}=this.scale;for(let t=0;t<C.children.entries.length;t++)C.children.entries[t].x<0&&C.children.entries[t].destroy();if(Math.random()>.5){const t=je[Math.floor(Math.random()*je.length)];C.create(e+this.cameras.main.scrollX+50,Math.floor(Math.random()*(s/2)),"theronus",`${t}.png`).setScale(B(A.resource.scale))}else C.create(e+this.cameras.main.scrollX+50,Math.floor(Math.random()*s/2)+s/2).setScale(B(A.resource.scale))}spawnObstacle(){const{width:e,height:s}=this.scale;for(let i=0;i<W.children.entries.length;i++)W.children.entries[i].x<0&&W.children.entries[i].destroy();var t;if(Math.random()>.5)t=W.create(e+this.cameras.main.scrollX+50,Math.floor(Math.random()*(s/2-40)),"theronus",`${Ve[Math.floor(Math.random()*Ve.length)]}.png`).setScale(B(A.obstacle.scale));else{const i=Ie[Math.floor(Math.random()*Ie.length)];if(t=W.create(e+this.cameras.main.scrollX+120,Math.floor(Math.random()*(s/2-40)+s/2),"theronus",`${i}.png`).setScale(B(A.obstacle.scale)),i=="palm_tree"){t.setCircle(5,t.body.halfWidth-5,t.body.halfHeight+17);return}}t.setCircle(t.body.halfWidth-2,2,t.body.halfHeight-t.body.halfWidth+2)}nextLevel(){a.state.timer.paused=!0,ne.paused=!0,he.paused=!0,we.paused=!0,setTimeout(()=>{a.state.level++,a.state.timer.delay=Math.floor(A.wave_time*1e3)+a.state.level*5e3,a.state.level>10&&a.conquer(),ne.delay=Math.max(ne.delay-20,130),he.delay=Math.min(he.delay+20,1e4),a.state.timer.paused=!1,ne.paused=!1,he.paused=!1,we.paused=!1},6e3)}preload(){this.load.atlas("theronus","img/theronus/sheet.png","img/theronus/sheet.json"),this.load.image("beach","img/theronus/beach_map.png"),this.load.image("sister",`semi_sister/${a.sister.data.name.replace(" #","")}.png`),this.load.audio("explosion",["sounds/utopia/explosion.ogg","sounds/utopia/explosion.mp3"]),this.load.audio("ice",["sounds/oxonia/ice.ogg","sounds/oxonia/ice.mp3"]),this.load.audio("impact",["sounds/lithonite/death.ogg","sounds/lithonite/death.mp3"])}create(){const{width:e,height:s}=this.scale,t=a.modifier;A={wave_time:50*t.wave_duration,player:{scale:1*t.player.size,speed:400*t.player.speed},boost_max:180,boost_gen:t.boost_gen,damage:t.damage,resource:{scale:{max:2*t.resource.size,min:2*t.resource.size},spawn:3e3/t.resource.spawn,gravity:{x:0,y:0}},obstacle:{scale:{max:4*t.obstacle.size,min:2*t.obstacle.size},spawn:400/t.obstacle.spawn,gravity:{x:0,y:0}}},a.state.timer=this.time.addEvent({delay:Math.floor(A.wave_time*1e3),callback:()=>{this.nextLevel()},loop:!0}),Xe=new ie(this,"Theronus",A.boost_max),this.bg=this.add.tileSprite(e/2,s/2,0,0,"beach"),this.bg.setSize(e,this.bg.height),this.bg.setScale(s/this.bg.height),this.bg.setScrollFactor(0);const i=this.sound.add("explosion"),o=this.sound.add("ice"),p=this.sound.add("impact"),c=this.sound.add("resource"),n=this.sound.add("game_over");this.anims.create({key:"explode",frameRate:8,frames:this.anims.generateFrameNames("theronus",{prefix:"explosion-",suffix:".png",end:6})}),this.anims.create({key:"poof",frameRate:8,frames:this.anims.generateFrameNames("theronus",{prefix:"poof-",suffix:".png",end:4})}),this.anims.create({key:"impact",frameRate:8,frames:this.anims.generateFrameNames("theronus",{prefix:"impact-",suffix:".png",end:4})}),J=this.input.keyboard.createCursorKeys(),C=this.physics.add.group({defaultKey:"theronus",defaultFrame:"trash0.png"}),W=this.physics.add.group({defaultKey:"theronus",defaultFrame:"rock0.png"});const d=this.add.particles("theronus","dirt.png");this.emitter=d.createEmitter({speed:70,gravityY:-50,gravityX:-50,scale:{start:.6,end:.1}});const m=new be.GameObjects.Image(this,0,0,"theronus","jeep.png").setScale(1.6),h=new be.GameObjects.Image(this,0,0,"sister").setScale(.6),u=new be.GameObjects.RenderTexture(this,0,0,125,76);u.draw(m,56,38),u.draw(h,60,19),u.setVisible(!1),u.saveTexture("player"),f=this.physics.add.image(e/2,s/2,"player").setScale(A.player.scale),f.setCollideWorldBounds(!0,1,0),f.setSize(115,56),f.setOffset(0,10),this.emitter.startFollow(f,-25,0),this.physics.add.collider(C,f,function(x,y){a.state.resources++,a.state.score+=10,c.play(),y.destroy()}),this.obstacle_collider=this.physics.add.collider(W,f,(x,y)=>{const P=Math.floor(y.width*y.scale/3*A.damage);if(a.state.health-=P,a.state.score-=P,a.state.health<1){if(a.died()){f.setVisible(!1),this.physics.pause(),we.paused=!0,i.play();const w=this.add.sprite(f.x,f.y,"theronus","explosion-0.png").setScale(f.scaleX+2.6);w.play("explode").once("animationcomplete",()=>{w.destroy(),this.scene.pause(),n.play()})}}else{if(y.y<this.scale.height/2){const w=this.add.sprite(y.x,y.y,"theronus","poof-0.png").setScale(y.scaleX+1.6);w.play("poof").once("animationcomplete",()=>{w.destroy()}),o.play()}else{const w=this.add.sprite(y.x,y.y,"theronus","impact-0.png").setScale(y.scaleX+1.6);w.play("impact").once("animationcomplete",()=>{w.destroy()}),p.play()}y.destroy()}}),we=this.time.addEvent({delay:300,callback:()=>{a.state.score++},loop:!0}),he=this.time.addEvent({delay:A.resource.spawn,callback:()=>{this.spawnResource()},loop:!0}),ne=this.time.addEvent({delay:A.obstacle.spawn,callback:()=>{this.spawnObstacle()},loop:!0})}update(){var t,i,o,p;this.bg.tilePositionX+=4/this.bg.scale,this.cameras.main.scrollX+=4,this.physics.world.setBounds(this.cameras.main.scrollX,0,this.scale.width,this.scale.height);let e=A.player.speed;if(f.y<this.scale.height/2){e=e*(f.y/(this.scale.height/2)+.2);const c=f.height-(this.scale.height/2-f.y)*.07;f.setCrop(0,f.height-c,f.width,c),this.emitter.setFrame("bubble.png"),this.emitter.setScale({start:4,end:.3})}else f.setCrop(),this.emitter.setFrame("dirt.png"),this.emitter.setScale({start:.6,end:.1});const s=this.input.gamepad.pad1;if(J.left.isDown||(s==null?void 0:s.left)||((t=s==null?void 0:s.leftStick)==null?void 0:t.x)<0?f.setVelocityX(Math.max(f.body.velocity.x-40,-e)):J.right.isDown||(s==null?void 0:s.right)||((i=s==null?void 0:s.leftStick)==null?void 0:i.x)>0?f.x<this.cameras.main.scrollX+100?f.setVelocityX(500):f.setVelocityX(Math.min(f.body.velocity.x+40,e)):f.setVelocityX(f.body.velocity.x>0?Math.max(f.body.velocity.x-40,0):Math.min(f.body.velocity.x+40,0)),J.up.isDown||(s==null?void 0:s.up)||((o=s==null?void 0:s.leftStick)==null?void 0:o.y)<0?(f.setVelocityY(Math.max(f.body.velocity.y-40,-e)),f.setAngle(-7)):J.down.isDown||(s==null?void 0:s.down)||((p=s==null?void 0:s.leftStick)==null?void 0:p.y)>0?(f.setVelocityY(Math.min(f.body.velocity.y+40,e)),f.setAngle(7)):(f.setAngle(0),f.setVelocityY(f.body.velocity.x>0?Math.max(f.body.velocity.y-50,0):Math.min(f.body.velocity.y+50,0))),J.space.isDown){if(a.state.boost>4){a.state.boost-=3;for(let c=0;c<C.children.entries.length;c++)C.children.entries[c].x+=Math.sign(f.x-C.children.entries[c].x)*3,C.children.entries[c].y+=Math.sign(f.y-C.children.entries[c].y)*3}}else a.state.boost=Math.min(A.boost_max,a.state.boost+.5*A.boost_gen);Xe.draw()}}const Se=window.Phaser;var k,O,Q,X,ce,xe,Z,Ye,v;class vt extends Se.Scene{constructor(){super("W-46b")}spawnResource(){const{width:e,height:s}=this.scale;for(let t=0;t<X.children.entries.length;t++)X.children.entries[t].x>e&&X.children.entries[t].destroy();Math.random()>.8?X.create(-50,Math.floor(Math.random()*s),"w46b","coral2.png").setScale(B(v.resource.scale)):X.create(-50,Math.floor(Math.random()*s)).setScale(B(v.resource.scale))}spawnObstacle(){const{width:e,height:s}=this.scale;for(let o=0;o<O.children.entries.length;o++)O.children.entries[o].x>e&&O.children.entries[o].destroy();var t;const i=Math.random();i>.95?(t=O.create(-50,Math.floor(Math.random()*s),"w46b","mine.png").setVelocityX(50).setScale(1),t.setCircle(t.width/2-7,7,8)):i>.85?(t=O.create(-50,Math.floor(Math.random()*s),"w46b","fish-dart-0.png").setVelocityX(400).setScale(B(v.obstacle.scale)).play("swim-dart"),t.setSize(t.width-10,t.height-30)):i>.6?(t=O.create(-50,Math.floor(Math.random()*s),"w46b","fish-big-0.png").setVelocityX(200).setScale(B(v.obstacle.scale)).play("swim-big"),t.setCircle(t.width/2-10,12,10)):(t=O.create(-50,Math.floor(Math.random()*s)).setScale(B(v.obstacle.scale)).play("swim"),t.setCircle(t.width/2-7,5,7))}nextLevel(){a.state.timer.paused=!0,Q.paused=!0,ce.paused=!0,xe.paused=!0,setTimeout(()=>{a.state.level++,a.state.timer.delay=Math.floor(v.wave_time*1e3)+a.state.level*5e3,a.state.level>10&&a.conquer(),Q.delay=Math.max(Q.delay-15,130),console.log(Q.delay),ce.delay=Math.min(ce.delay+20,1e4),a.state.timer.paused=!1,Q.paused=!1,ce.paused=!1,xe.paused=!1},6e3)}preload(){this.load.atlas("w46b","img/w46b/sheet.png","img/w46b/sheet.json"),this.load.image("sister",`circle_sister/${a.sister.data.name.replace(" #","")}.png`),this.load.audio("explosion",["sounds/w46b/explosion.ogg","sounds/w46b/explosion.mp3"]),this.load.audio("bubbles",["sounds/w46b/bubbles.ogg","sounds/w46b/bubbles.m4a","sounds/w46b/bubbles.mp3"])}create(){const{width:e,height:s}=this.scale,t=a.modifier;v={wave_time:50*t.wave_duration,player:{scale:1*t.player.size,speed:400*t.player.speed},boost_max:180,boost_gen:t.boost_gen,damage:t.damage,resource:{scale:{max:.6*t.resource.size,min:.6*t.resource.size},spawn:4e3/t.resource.spawn,gravity:{x:70,y:0}},obstacle:{scale:{max:3.8*t.obstacle.size,min:1*t.obstacle.size},spawn:300/t.obstacle.spawn,gravity:{x:100,y:0}}},a.state.timer=this.time.addEvent({delay:Math.floor(v.wave_time*1e3),callback:()=>{this.nextLevel()},loop:!0}),Ye=new ie(this,"W-46b",v.boost_max),this.bg=this.add.tileSprite(e/2,s/2,0,0,"w46b","far.png"),this.bg1=this.add.tileSprite(e/2,s/2,0,0,"w46b","sand.png"),this.bg2=this.add.tileSprite(e/2,s/2,0,0,"w46b","foreground-merged.png"),this.bg.setSize(this.bg.width*Math.ceil(e/(this.bg.width*(s/this.bg.height))),this.bg.height),this.bg1.setSize(this.bg1.width*Math.ceil(e/(this.bg1.width*(s/this.bg1.height))),this.bg1.height),this.bg2.setSize(this.bg2.width*Math.ceil(e/(this.bg2.width*(s/this.bg2.height))),this.bg2.height),this.bg.setScale(s/this.bg.height),this.bg1.setScale(s/this.bg1.height),this.bg2.setScale(s/this.bg2.height);const i=this.sound.add("explosion"),o=this.sound.add("bubbles",{volume:.4}),p=this.sound.add("resource"),c=this.sound.add("game_over");this.anims.create({key:"explode",frameRate:8,frames:this.anims.generateFrameNames("w46b",{prefix:"explosion-",suffix:".png",end:10})}),this.anims.create({key:"death",frameRate:8,frames:this.anims.generateFrameNames("w46b",{prefix:"enemy-death-",suffix:".png",end:5})}),this.anims.create({key:"swim",frameRate:12,frames:this.anims.generateFrameNames("w46b",{prefix:"fish-",suffix:".png",end:3}),repeat:-1}),this.anims.create({key:"swim-dart",frameRate:12,frames:this.anims.generateFrameNames("w46b",{prefix:"fish-dart-",suffix:".png",end:3}),repeat:-1}),this.anims.create({key:"swim-big",frameRate:12,frames:this.anims.generateFrameNames("w46b",{prefix:"fish-big-",suffix:".png",end:3}),repeat:-1}),Z=this.input.keyboard.createCursorKeys(),X=this.physics.add.group({defaultKey:"w46b",defaultFrame:"coral1.png",velocityX:70}),O=this.physics.add.group({defaultKey:"w46b",defaultFrame:"fish-0.png",velocityX:300});var n=this.add.particles("w46b","bubble.png"),d=n.createEmitter({speed:70,gravityY:-100,scale:{start:2,end:.2},blendMode:"ADD"});const m=new Se.GameObjects.Image(this,0,0,"w46b","submarinewindowless.png").setScale(3),h=new Se.GameObjects.Image(this,0,0,"sister").setScale(.6),u=new Se.GameObjects.RenderTexture(this,0,0,96,96);u.draw(m,48,48),u.draw(h,37,66),u.setVisible(!1),u.saveTexture("player"),k=this.physics.add.image(e/2,s/2,"player").setScale(v.player.scale),k.setCollideWorldBounds(!0),k.setSize(96,50),k.setOffset(0,40),d.startFollow(k,36,20),this.physics.add.collider(X,k,function(x,y){a.state.resources++,a.state.score+=10,p.play(),y.destroy()}),this.physics.add.collider(O,k,(x,y)=>{const P=Math.floor(y.width*y.scale/3*v.damage)*(y.frame.name=="mine.png"?3:1);if(a.state.health-=P,a.state.score-=P,a.state.health<1){if(a.died()){k.setVisible(!1),this.physics.pause(),xe.paused=!0,i.play(),o.play();const w=this.add.sprite(k.x,k.y,"w46b","explosion-0.png").setScale(k.scaleX+2.6);w.play("explode").once("animationcomplete",()=>{w.destroy(),this.scene.pause(),c.play()})}}else{if(o.play(),y.frame.name=="mine.png"){const w=this.add.sprite(y.x,y.y,"w46b","explosion-0.png").setScale(y.scaleX+1.6);w.play("explode").once("animationcomplete",()=>{w.destroy()}),i.play()}else{const w=this.add.sprite(y.x,y.y,"w46b","enemy-death-0.png").setScale(y.scaleX);w.play("death").once("animationcomplete",()=>{w.destroy()})}y.destroy()}}),xe=this.time.addEvent({delay:300,callback:()=>{a.state.score++},loop:!0}),ce=this.time.addEvent({delay:v.resource.spawn,callback:()=>{this.spawnResource()},loop:!0}),Q=this.time.addEvent({delay:v.obstacle.spawn,callback:()=>{this.spawnObstacle()},loop:!0})}update(){var s,t,i,o,p,c,n,d;this.bg.tilePositionX-=.05,this.bg1.tilePositionX-=.1,this.bg2.tilePositionX-=.4;const e=this.input.gamepad.pad1;if(Z.up.isDown||(e==null?void 0:e.up)||((s=e==null?void 0:e.leftStick)==null?void 0:s.y)<0?k.setVelocityY(-(v.player.speed-50)*Math.abs(((t=e==null?void 0:e.leftStick)==null?void 0:t.y)||1)):Z.down.isDown||(e==null?void 0:e.down)||((i=e==null?void 0:e.leftStick)==null?void 0:i.y)>0?k.setVelocityY((v.player.speed-200)*Math.abs(((o=e==null?void 0:e.leftStick)==null?void 0:o.y)||1)):k.setVelocityY(0),Z.left.isDown||(e==null?void 0:e.left)||((p=e==null?void 0:e.leftStick)==null?void 0:p.x)<0?k.setVelocityX(-v.player.speed*Math.abs(((c=e==null?void 0:e.leftStick)==null?void 0:c.x)||1)):Z.right.isDown||(e==null?void 0:e.right)||((n=e==null?void 0:e.leftStick)==null?void 0:n.x)>0?k.setVelocityX(v.player.speed*Math.abs(((d=e==null?void 0:e.leftStick)==null?void 0:d.x)||1)):k.setVelocityX(0),Z.space.isDown){if(a.state.boost>0||(e==null?void 0:e.A)){a.state.boost-=4;for(let m=0;m<O.children.entries.length;m++)O.children.entries[m].frame.name!=="mine.png"&&(O.children.entries[m].y<k.y?O.children.entries[m].setVelocityY(O.children.entries[m].body.velocity.y-5):O.children.entries[m].setVelocityY(O.children.entries[m].body.velocity.y+5))}}else a.state.boost=Math.min(v.boost_max,a.state.boost+.3*v.boost_gen);Ye.draw()}}const Re=window.Phaser;var S,E,$,de,ee,pe,ve,te,Ue,M;class _t extends Re.Scene{constructor(){super("Lithonite")}spawnResource(){const{width:e,height:s}=this.scale;for(let t=0;t<ee.children.entries.length;t++)ee.children.entries[t].x<0&&ee.children.entries[t].destroy();for(let t=0;t<$.children.entries.length;t++)$.children.entries[t].x>e&&$.children.entries[t].destroy();ee.create(e+50,s-38*this.bg[0].scale).setScale(B(M.resource.scale))}spawnObstacle(){const{width:e,height:s}=this.scale;for(let o=0;o<E.children.entries.length;o++)E.children.entries[o].x<0&&E.children.entries[o].destroy();var t;Math.random()>.8?t=E.create(e+50,s-38*this.bg[0].scale,"lithonite","alien1-0.png").setScale(B(M.obstacle.scale)).play("walk"):t=E.create(e+50,Math.floor(Math.random()*s-38*this.bg[0].scale)).setVelocityX(-400).setScale(B(M.obstacle.scale)).play("fly"),t.setCircle(t.body.halfWidth/2,t.body.halfWidth/2,t.body.halfHeight/2)}nextLevel(){a.state.timer.paused=!0,de.paused=!0,pe.paused=!0,ve.paused=!0,setTimeout(()=>{a.state.level++,a.state.timer.delay=Math.floor(M.wave_time*1e3)+a.state.level*5e3,a.state.level>10&&a.conquer(),de.delay=Math.max(de.delay-15,150),pe.delay=Math.min(pe.delay+20,1e4),a.state.timer.paused=!1,de.paused=!1,pe.paused=!1,ve.paused=!1},6e3)}preload(){this.load.atlas("lithonite","img/lithonite/sheet.png","img/lithonite/sheet.json"),this.load.image("sister",`circle_sister/${a.sister.data.name.replace(" #","")}.png`),this.load.audio("explosion",["sounds/utopia/explosion.ogg","sounds/utopia/explosion.mp3"]),this.load.audio("death",["sounds/lithonite/death.ogg","sounds/lithonite/death.m4a","sounds/lithonite/explosion.mp3"])}create(){const{width:e,height:s}=this.scale,t=a.modifier;M={wave_time:50*t.wave_duration,player:{scale:1*t.player.size,speed:400*t.player.speed},boost_max:180,boost_gen:t.boost_gen,damage:t.damage,resource:{scale:{max:1*t.resource.size,min:1*t.resource.size},spawn:3e3/t.resource.spawn,gravity:{x:70,y:0}},obstacle:{scale:{max:2.7*t.obstacle.size,min:1.2*t.obstacle.size},spawn:300/t.obstacle.spawn,gravity:{x:100,y:0}}},a.state.timer=this.time.addEvent({delay:Math.floor(M.wave_time*1e3),callback:()=>{this.nextLevel()},loop:!0}),Ue=new ie(this,"Lithonite",M.boost_max),this.bg=[];for(let h=0;h<12;h++)this.bg.push(this.add.tileSprite(e/2,s/2,0,0,"lithonite",`layer${h}.png`)),this.bg[h].setSize(this.bg[h].width*Math.ceil(e/(this.bg[h].width*(s/this.bg[h].height))),this.bg[h].height),this.bg[h].setScale(s/this.bg[h].height);this.physics.world.setBounds(0,0,e,s-38*this.bg[0].scale);const i=this.sound.add("explosion"),o=this.sound.add("death",{volume:.4}),p=this.sound.add("resource"),c=this.sound.add("game_over");this.anims.create({key:"explode",frameRate:8,frames:this.anims.generateFrameNames("lithonite",{prefix:"explosion-",suffix:".png",end:8})}),this.anims.create({key:"death",frameRate:8,frames:this.anims.generateFrameNames("lithonite",{prefix:"poof-",suffix:".png",end:4})}),this.anims.create({key:"shoot",frameRate:8,frames:this.anims.generateFrameNames("lithonite",{prefix:"bullet-",suffix:".png",end:1}),repeat:-1}),this.anims.create({key:"fly",frameRate:12,frames:this.anims.generateFrameNames("lithonite",{prefix:"alien-flying-",suffix:".png",end:7}),repeat:-1}),this.anims.create({key:"walk",frameRate:12,frames:this.anims.generateFrameNames("lithonite",{prefix:"alien1-",suffix:".png",end:5}),repeat:-1}),te=this.input.keyboard.createCursorKeys(),ee=this.physics.add.group({defaultKey:"lithonite",defaultFrame:"flower.png",velocityX:-50*this.bg[0].scaleX}),E=this.physics.add.group({defaultKey:"lithonite",defaultFrame:"alien-flying-0.png",velocityX:-300}),$=this.physics.add.group({defaultKey:"lithonite",defaultFrame:"bullet-0.png",velocityX:300});const n=new Re.GameObjects.Image(this,0,0,"sister").setScale(.6),d=new Re.GameObjects.RenderTexture(this,0,0,848,77);d.drawFrame("lithonite","ship-0.png",0,0),d.draw(n,80,26),d.drawFrame("lithonite","ship-1.png",106,0),d.draw(n,186,26),d.drawFrame("lithonite","ship-2.png",212,0),d.draw(n,292,27),d.drawFrame("lithonite","ship-3.png",318,0),d.draw(n,398,27),d.drawFrame("lithonite","ship-4.png",424,0),d.draw(n,504,29),d.drawFrame("lithonite","ship-5.png",530,0),d.draw(n,610,29),d.drawFrame("lithonite","ship-6.png",636,0),d.draw(n,716,26),d.drawFrame("lithonite","ship-7.png",742,0),d.draw(n,822,26),d.setVisible(!1);const m=d.saveTexture("player");m.add(0,0,0,0,106,77),m.add(1,0,106,0,106,77),m.add(2,0,212,0,106,77),m.add(3,0,318,0,106,77),m.add(4,0,424,0,106,77),m.add(5,0,530,0,106,77),m.add(6,0,636,0,106,77),m.add(7,0,742,0,106,77),this.anims.create({key:"hover",frameRate:15,frames:this.anims.generateFrameNumbers("player",{end:7}),repeat:-1}),S=this.physics.add.sprite(e/2,s/2,"player",0).setScale(M.player.scale).play("hover"),S.setCollideWorldBounds(!0),S.setSize(S.displayWidth-20,S.displayHeight-20),S.setOffset(20,10),this.physics.add.collider(ee,S,(h,u)=>{a.state.resources++,a.state.score+=10,p.play(),u.destroy()}),this.physics.add.collider($,E,(h,u)=>{const x=this.add.sprite(u.x,u.y,"lithonite","poof-0.png").setScale(u.scaleX+1.6);x.play("death").once("animationcomplete",()=>{x.destroy()}),o.play(),h.destroy(),u.destroy()}),this.physics.add.collider(E,S,(h,u)=>{const x=Math.floor(u.width*u.scale/3*M.damage);if(a.state.health-=x,a.state.score-=x,a.state.health<1){if(a.died()){S.setVisible(!1),this.physics.pause(),ve.paused=!0,i.play();const y=this.add.sprite(S.x,S.y,"lithonite","explosion-0.png").setScale(S.scaleX+2.6);y.play("explode").once("animationcomplete",()=>{y.destroy(),this.scene.pause(),c.play()})}}else{if(o.play(),u.frame.name=="mine.png"){const y=this.add.sprite(u.x,u.y,"lithonite","explosion-0.png").setScale(u.scaleX+1.6);y.play("explode").once("animationcomplete",()=>{y.destroy()}),i.play()}else{const y=this.add.sprite(u.x,u.y,"lithonite","poof-0.png").setScale(u.scaleX+1.6);y.play("death").once("animationcomplete",()=>{y.destroy()})}u.destroy()}}),ve=this.time.addEvent({delay:300,callback:()=>{a.state.score++},loop:!0}),pe=this.time.addEvent({delay:M.resource.spawn,callback:()=>{this.spawnResource()},loop:!0}),de=this.time.addEvent({delay:M.obstacle.spawn,callback:()=>{this.spawnObstacle()},loop:!0})}update(){var s,t,i,o,p,c,n,d;this.bg.forEach((m,h)=>{m.tilePositionX+=h/10});const e=this.input.gamepad.pad1;te.up.isDown||(e==null?void 0:e.up)||((s=e==null?void 0:e.leftStick)==null?void 0:s.y)<0?S.setVelocityY(-M.player.speed*Math.abs(((t=e==null?void 0:e.leftStick)==null?void 0:t.y)||1)):te.down.isDown||(e==null?void 0:e.down)||((i=e==null?void 0:e.leftStick)==null?void 0:i.y)>0?S.setVelocityY(M.player.speed*Math.abs(((o=e==null?void 0:e.leftStick)==null?void 0:o.y)||1)):S.setVelocityY(0),te.left.isDown||(e==null?void 0:e.left)||((p=e==null?void 0:e.leftStick)==null?void 0:p.x)<0?S.setVelocityX(-M.player.speed*Math.abs(((c=e==null?void 0:e.leftStick)==null?void 0:c.x)||1)):te.right.isDown||(e==null?void 0:e.right)||((n=e==null?void 0:e.leftStick)==null?void 0:n.x)>0?S.setVelocityX(M.player.speed*Math.abs(((d=e==null?void 0:e.leftStick)==null?void 0:d.x)||1)):S.setVelocityX(0),te.space.isDown||(e==null?void 0:e.A)?a.state.boost==M.boost_max&&(a.state.boost=0,$.create(S.x,S.y).setVelocityY(50).setScale(4).play("shoot"),$.create(S.x,S.y).setVelocityY(-50).setScale(4).play("shoot"),$.create(S.x,S.y).setScale(4).play("shoot")):a.state.boost=Math.min(M.boost_max,a.state.boost+1.2*M.boost_gen),Ue.draw()}}const kt=window.Phaser,Mt={Utopia:["Collect: Leaves","","Avoid: Asteroids","","Boost: Anti Gravity"],Oxonia:["Collect: Wood","","Avoid: Rocks and Ice","","Boost: Invisibility"],Theronus:["Collect: Litter","","Avoid: Rocks and Palm Trees","","Boost: Litter Magnet"],"W-46b":["Collect: Coral","","Avoid: Fish and Sea Mines","","Boost: Part The Sea"],Lithonite:["Collect: Flowers","","Avoid: The Creatures","","Boost: Tri-Blast"]};class Pt extends kt.Scene{constructor(){super("pause")}create(){const{width:e,height:s}=this.scale,t=this.input.gamepad.total!==0;var i=this.add.graphics();i.lineStyle(5,0,1),i.fillStyle(16777215,1),i.fillRoundedRect(e/2-260,s/2-225,520,450,8),this.add.text(e/2-60,s/2-210,"PAUSED",{fontSize:"32px",fontFamily:"Gilroy Bold, sans-serif",color:"#000"});const o=this.add.text(e/2-45,s/2-140,"Resume",{fontSize:"22px",fontFamily:"Gilroy Bold, sans-serif",color:"#555"}).setInteractive({cursor:"pointer"}).on("pointerup",()=>a.pause());o.on("pointerover",()=>o.setColor("#000")).on("pointerout",()=>o.setColor("#555"));const p=this.add.text(e/2-60,s/2-100,"Main Menu",{fontSize:"22px",fontFamily:"Gilroy Bold, sans-serif",color:"#555"}).setInteractive({cursor:"pointer"}).on("pointerup",()=>a.endGame());p.on("pointerover",()=>p.setColor("#000")).on("pointerout",()=>p.setColor("#555")),this.add.text(e/2-245,s/2-10,["Controls:","",`Movement: ${t?"Left Stick":"Arrow keys"}`,"",`Boost: ${t?"A":"Space Bar"}`,"",`Pause/Resume: ${t?"Start Button":"P key"}`],{fontSize:"16px",fontFamily:"Gilroy Bold, sans-serif",color:"#000"}),this.add.text(e/2+55,s/2-10,["Objective:","",...Mt[a.planet.name]],{fontSize:"16px",fontFamily:"Gilroy Bold, sans-serif",color:"#000",wordWrap:{width:190}}),this.input.keyboard.on("keydown-P",()=>a.pause()),this.input.keyboard.on("keydown-ESC",()=>a.pause()),t?this.input.gamepad.pad1.on("down",c=>{c==9&&a.pause()}):this.input.gamepad.once("connected",c=>{c.on("down",n=>{n==9&&a.pause()})})}}const Rt=window.Phaser;class zt extends Rt.Scene{constructor(){super("pause")}create(){const{width:e,height:s}=this.scale,t=this.input.gamepad.total!==0;var i=this.add.graphics();i.lineStyle(5,0,1),i.fillStyle(16777215,1),i.fillRoundedRect(e/2-260,s/2-225,520,450,8),this.add.text(e/2-85,s/2-210,a.conquer_error?"TRY AGAIN":"CONGRATS",{fontSize:"32px",fontFamily:"Gilroy Bold, sans-serif",color:"#000"});const o=this.add.text(e/2-50,s/2-140,"Continue",{fontSize:"22px",fontFamily:"Gilroy Bold, sans-serif",color:"#555"}).setInteractive({cursor:"pointer"}).on("pointerup",()=>a.pause());o.on("pointerover",()=>o.setColor("#000")).on("pointerout",()=>o.setColor("#555"));const p=this.add.text(e/2-60,s/2-100,"Main Menu",{fontSize:"22px",fontFamily:"Gilroy Bold, sans-serif",color:"#555"}).setInteractive({cursor:"pointer"}).on("pointerup",()=>a.endGame());p.on("pointerover",()=>p.setColor("#000")).on("pointerout",()=>p.setColor("#555"));const c=this.add.text(e/2-40,s/2-60,"Restart",{fontSize:"22px",fontFamily:"Gilroy Bold, sans-serif",color:"#555"}).setInteractive({cursor:"pointer"}).on("pointerup",()=>a.restartGame());c.on("pointerover",()=>c.setColor("#000")).on("pointerout",()=>c.setColor("#555"));const n=a.conquer_error?[a.conquer_error,"","Restart this world to try again","","Or continue to go for a highscore"]:[`You have unlocked a spot on ${a.planet.name}!`,"","Head over to sisterverse.xyz at any time to place/move a token to this planet","","Continue playing to try for a highsore","Highest scores may result in periodic prizes"];this.add.text(e/2-245,s/2-10,n,{fontSize:"22px",fontFamily:"Gilroy Bold, sans-serif",color:"#000",wordWrap:{width:500}}),this.input.keyboard.on("keydown-P",()=>a.pause()),t?this.input.gamepad.pad1.on("down",d=>{d==9&&a.pause()}):this.input.gamepad.once("connected",d=>{d.on("down",m=>{m==9&&a.pause()})})}}const Bt="D1B4Hixz7jkTwcw33jsoQha3Jhx7HQqYJQYZj3BamJHi",Ot="B3Mu9hdhMfBpnUo2m3UbJXNwipUKEtUQTvFsWEPaqYh3",He=new V("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),At="metadata";Ge.prototype.readPubkey=function(){const e=this.readFixedArray(32);return new V(e)};Le.prototype.writePubkey=function(r){this.writeFixedArray(r.toBuffer())};Ge.prototype.readPubkeyAsString=function(){const e=this.readFixedArray(32);return ue.encode(e)};Le.prototype.writePubkeyAsString=function(r){this.writeFixedArray(ue.decode(r))};class qe{constructor(e){this.address=e.address,this.verified=e.verified,this.share=e.share}}class Ke{constructor(e){this.name=e.name,this.symbol=e.symbol,this.uri=e.uri,this.sellerFeeBasisPoints=e.sellerFeeBasisPoints,this.creators=e.creators}}class Je{constructor(e){this.updateAuthority=e.updateAuthority,this.mint=e.mint,this.is_hex=e.updateAuthority===Ot,this.is_sister=e.updateAuthority===Bt,this.data=e.data,this.primarySaleHappened=e.primarySaleHappened,this.isMutable=e.isMutable,this.editionNonce=e.editionNonce}}const Ct=new Map([[Ke,{kind:"struct",fields:[["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[qe]}]]}],[qe,{kind:"struct",fields:[["address","pubkeyAsString"],["verified","u8"],["share","u8"]]}],[Je,{kind:"struct",fields:[["key","u8"],["updateAuthority","pubkeyAsString"],["mint","pubkeyAsString"],["data",Ke],["primarySaleHappened","u8"],["isMutable","u8"]]}]]),Ft=async function(r){const e=new V(r);return(await V.findProgramAddress([Buffer.from(At),He.toBuffer(),e.toBuffer()],He))[0]},ze=new RegExp("\0","g"),Gt=r=>{const e=lt(Ct,Je,r);return e.data.name=e.data.name.replace(ze,""),e.data.uri=e.data.uri.replace(ze,""),e.data.symbol=e.data.symbol.replace(ze,""),e};let Qe=new nt("https://try-rpc.mainnet.solana.blockdaemon.tech","confirmed");const Lt=async r=>{const{value:e}=await Qe.getTokenAccountsByOwner(new V(r),{programId:ht});let s=[];for(let t=0;t<e.length;t++)ue.encode(e[t].account.data.slice(64,72))=="Ahg1opVcGX"&&s.push(ue.encode(e[t].account.data.slice(0,32)));return s},Nt=async r=>{var t;if(!r||r.length===0||r.length>100)throw new Error("Invalid args. Min 1 Max 100 pubkeys");r.forEach((i,o)=>{typeof i=="string"&&(r[o]=new V(i))});const e=await Qe.getMultipleAccountsInfo(r);let s=[];for(let i=0;i<e.length;i++)((t=e[i])==null?void 0:t.data)&&s.push(e[i].data);return s},Tt=async r=>{const e=await Promise.all(r.map(t=>Ft(t)));return(await Nt(e)).map(t=>Gt(t))},Dt=async r=>{if(!r||typeof r!="string")return{error:"No wallet provided"};try{let e=await Lt(r);if(e.length==0)return{hexes:[],sisters:[],other:[]};let s=[];for(let n=0;n<Math.ceil(e.length/100);n++)s.push(Tt(e.slice(n*100,(n+1)*100)));const t=(await Promise.all(s)).flat();let i=[],o=[],p=[];(await Promise.allSettled(t.map(n=>Fe({method:"get",url:n.data.uri,timeout:4e3})))).forEach(({value:n},d)=>{e[d]=ke(ae({},t[d]),{meta:n==null?void 0:n.data})});for(let n=0;n<t.length;n++)t[n].data.uri,t[n].is_sister?i.push(e[n]):t[n].is_hex?o.push(e[n]):p.push(e[n]);return{sisters:i,hexes:o,other:p}}catch(e){return console.error(e),{error:"Solana failed to respond"}}},_e=window.Phaser,Et=window.Dexie;function Be(r){var e,s,t,i;return ae({data:{name:(e=r.data)==null?void 0:e.name,uri:(s=r.data)==null?void 0:s.uri},meta:{attributes:JSON.parse(JSON.stringify(((t=r.meta)==null?void 0:t.attributes)||[])),image:(i=r.meta)==null?void 0:i.image},updateAuthority:r.updateAuthority,mint:r.mint},r.spot?{spot:r.spot}:{})}function Ze(r){return Math.round(Date.now()/1e3)+(r||0)}const $t=-3600;var D=new Et("Sisterverse");D.version(1).stores({wallets:"&address, ts"});class Wt{constructor(){this.wallet={address:!1,open:!1,sisters:[],hexes:[],other:[]},this.leaderboard=[],this.loading=!1,this.inGame=!1,this.user={_id:"",wallet:"",highscore:0,lives:10,name:"Test",planets:[{name:"Utopia",spots:0},{name:"Oxonia",spots:0},{name:"Theronus",spots:0},{name:"W-46b",spots:0},{name:"Lithonite",spots:0}],sister:"SolSister #05282",is_new:!0},this.authenticate=!1,this.no_sisters=!1,this.no_hexes=!1,this.sister={data:{name:"SolSister #05282"}},this.hex={},this.boosts={sister:[],hex:[]},this.planet={name:"Utopia"},this.paused=!1,this.muted=window.localStorage.getItem("mute")=="y",ct(this),this.refresh_count=0,this.refreshing=!1,this.sister_ind=0,this.hex_ind=0,this.planet_ind=0,this.game=null,this.state={score:0,boost:0,health:100,resources:0,level:1,timer:null}}get modifier(){let e={player:{size:1,speed:1},resource:{size:1,spawn:1},obstacle:{size:1,spawn:1},damage:1,boost_gen:1,wave_duration:1};for(let s=0;s<this.boosts.sister.length;s++){const t=this.boosts.sister[s].boost;(!t.planet||t.planet===this.planet.name)&&(e.player.size+=t["Player Size"]-1||0,e.player.speed+=t["Player Speed"]-1||0,e.boost_gen+=t["Boost Regeneration"]-1||0,e.damage-=t.Shield-1||0,e.wave_duration+=t["Wave Duration"]-1||0,e.resource.size+=t["Resource Size"]-1||0,e.resource.spawn+=t["Resource Spawn"]-1||0,e.obstacle.size+=t["Obstacle Size"]-1||0,e.obstacle.spawn+=t["Obstacle Spawn"]-1||0)}for(let s=0;s<this.boosts.hex.length;s++){const t=this.boosts.hex[s].boost;(!t.planet||t.planet===this.planet.name)&&(e.player.size+=t["Player Size"]-1||0,e.player.speed+=t["Player Speed"]-1||0,e.boost_gen+=t["Boost Regeneration"]-1||0,e.damage-=t.Shield-1||0,e.wave_duration+=t["Wave Duration"]-1||0,e.resource.size+=t["Resource Size"]-1||0,e.resource.spawn+=t["Resource Spawn"]-1||0,e.obstacle.size+=t["Obstacle Size"]-1||0,e.obstacle.spawn+=t["Obstacle Spawn"]-1||0)}return e}setWallet(e){this.wallet.address=e,this.walletCollection({address:e})}async walletCollection({address:e,refresh:s}){if(!(s&&this.refreshing)){if(F(()=>{this.loading=!0,this.refreshing=!0}),this.refresh_count>3)return N.error("If you're tokens aren't loading properly, there may be an interruption with the Solana RPC network. Try refreshing the page. DM us on Discord if you continue to have issues",{duration:5e3});s&&this.refresh_count++;try{if(!s&&(D==null?void 0:D.wallets)){const c=await D.wallets.get({address:e}).catch(()=>null);if(c&&(F(()=>this.updateWallet({sisters:c.sisters,hexes:c.hexes,other:c.other,save:!1})),c.ts>Ze($t)))return}const{hexes:t,sisters:i,other:o,error:p}=await Dt(e);if(p)return N.error("There was an issue loading your tokens. Please refresh");F(()=>this.updateWallet({sisters:i,hexes:t,other:o,save:!0}))}catch(t){console.error(t),N.error("There was an issue loading your tokens. Please refresh")}finally{F(()=>this.loading=!1)}}}updateWallet({sisters:e,hexes:s,other:t,save:i}){this.wallet.sisters=e,this.wallet.hexes=s,this.wallet.other=t,this.setHex(0),this.setSister(0),e.length>0&&this.getUser(),i&&(D==null?void 0:D.wallets)&&D.wallets.put({address:this.wallet.address,sisters:e.map(o=>Be(o)),hexes:s.map(o=>Be(o)),other:t.map(o=>Be(o)),ts:Ze()}).catch(o=>console.error(o))}async getUser(){F(()=>this.loading=!0);try{const{data:e}=await G.post("user",{num_sis:this.wallet.sisters.length});e.ok&&(F(()=>{this.user=e.user,this.state=ae({},this.state),e.user.sister&&this.setSister(e.user.sister),e.user.hex&&this.setHex(e.user.hex),this.authenticate=!1}),this.loadLeaderboard())}catch(e){console.error(e);try{const{data:s}=await G.get("nonce");this.authenticate=!0,this.nonce=s.nonce}catch(s){console.error(s),N.error("There was an issue with the authentication process. Please reload the page and try again")}}finally{F(()=>this.loading=!1)}}async login({publicKey:e,signature:s}){const{data:t}=await G.post("login",{wallet:this.wallet.address,publicKey:e,signature:s});t.ok&&this.getUser()}async loadLeaderboard(){try{const{data:e}=await G.get("leaderboard");e.ok&&F(()=>this.leaderboard=e.leaderboard)}catch(e){console.error(e)}}async setName(e){F(()=>this.loading=!0);try{const{data:s}=await G.put("user",{name:e});s.ok&&F(()=>this.user=ke(ae({},this.user),{is_new:!1,name:e}))}catch(s){console.error(s)}finally{F(()=>this.loading=!1)}}setSister(e){if(this.wallet.sisters.length===0)return this.no_sisters=!0;typeof e=="string"?this.sister_ind=this.wallet.sisters.findIndex(s=>e==s.data.name):this.sister_ind=(this.sister_ind+e)%this.wallet.sisters.length,this.sister_ind<0&&(this.sister_ind=this.wallet.sisters.length-1),this.sister=this.wallet.sisters[this.sister_ind],this.boosts.sister=[];for(let s=0;s<this.sister.meta.attributes.length;s++){const{boost:t,rarity:i}=ft[this.sister.meta.attributes[s].trait_type][this.sister.meta.attributes[s].value]||{boost:void 0,rarity:"?"};t&&this.boosts.sister.push({boost:t,rarity:i,trait:{type:this.sister.meta.attributes[s].trait_type,value:this.sister.meta.attributes[s].value}})}}setHex(e){if(this.wallet.hexes.length===0)return this.no_hexes=!0;typeof e=="string"?this.hex_ind=this.wallet.hexes.findIndex(s=>e==s.data.name):this.hex_ind=(this.hex_ind+e)%this.wallet.hexes.length,this.hex_ind<0&&(this.hex_ind=this.wallet.hexes.length-1),this.hex=this.wallet.hexes[this.hex_ind],this.boosts.hex=[];for(let s=0;s<this.hex.meta.attributes.length;s++){const{boost:t,rarity:i}=gt[this.hex.meta.attributes[s].trait_type][this.hex.meta.attributes[s].value]||{boost:void 0,rarity:"?"};t&&this.boosts.hex.push({boost:t,rarity:i,trait:{type:this.hex.meta.attributes[s].trait_type,value:this.hex.meta.attributes[s].value}})}}setPlanet(e){this.planet_ind=(this.planet_ind+e)%this.user.planets.length,this.planet_ind<0&&(this.planet_ind=this.user.planets.length-1),this.planet=this.user.planets[this.planet_ind]}mute(){!this.game||(this.muted=!this.muted,this.game.sound.mute=this.muted,window.localStorage.setItem("mute",this.muted?"y":"n"))}pause(){if(!this.game)return;this.paused=!this.paused;const e=this.game.scene.getScenes(!1);for(let s=0;s<e.length;s++)this.paused?e[s].scene.pause():e[s].scene.resume();this.paused?(this.game.scene.add("pause",Pt,!0),this.game.sound.pauseAll()):(this.game.scene.remove("pause"),this.game.sound.resumeAll())}launchGame(){var s,t,i,o;if(this.user.lives==0)return N.error("All out of lives",{id:"err"});if(this.planet.locked)return N.error("You must conquer the previous planet first",{id:"err"});var e={type:_e.AUTO,backgroundColor:"#000000",antialias:!0,input:{gamepad:!0},scale:{mode:_e.Scale.FIT,autoCenter:_e.Scale.CENTER_BOTH,parent:"app",width:Math.max(Math.min(window.innerWidth,1680),700),height:Math.max(Math.min(window.innerHeight,950),400)},loader:{baseURL:"https://alldrit.ca/project/sisterverse_game"},physics:{default:"arcade",arcade:{}},scene:[bt,wt,St,xt,vt,_t]};this.inGame=!0,this.game=new _e.Game(e),this.game.sound.mute=this.muted,G.post("start",{planet:this.planet.name,sister:(t=(s=this.sister)==null?void 0:s.data)==null?void 0:t.name,hex:(o=(i=this.hex)==null?void 0:i.data)==null?void 0:o.name})}highscore(e){this.user.highscore<this.state.score&&(this.user.highscore=this.state.score,G.put("user",{score:this.state.score}))}async conquer(){this.highscore(!0),this.user.planets.findIndex(({name:e})=>e==this.planet.name);try{const{data:e}=await G.post("conquer",{planet:this.planet.name,resources:this.state.resources});if(!this.game)return;this.paused=!0;const s=this.game.scene.getScenes(!1);for(let t=0;t<s.length;t++)s[t].scene.pause();e.ok?(this.user=e.user,this.conquer_error=null):this.conquer_error=e.error,this.game.scene.add("conquer",zt,!0),this.game.sound.pauseAll()}catch(e){console.error(e),N.error("Sorry there was an issue")}}resetPlayer(){this.state.resources=0,this.state.level=1,this.state.health=100,this.state.score=0}restartGame(){this.resetPlayer(),setTimeout(()=>{this.state.timer.reset(),this.game.scene.getScene(this.planet.name).scene.restart()},2e3)}endGame(){this.highscore(!0),this.paused=!1,this.inGame=!1,this.game.destroy(!0),this.game=null,this.resetPlayer()}died(){return this.highscore(),G.post("died",{score:this.state.score}),this.user.lives--,this.user.lives<1?(N.error("All out of lives!"),this.endGame(),!1):(this.restartGame(),!0)}logout(){this.user=!1,G.post("logout")}}const Xt=new Wt;var a=Xt,et=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(et=!0);var Vt=et;window.addEventListener("contextmenu",r=>{r.preventDefault()}),window.addEventListener("keydown",r=>{r.keyCode==123&&r.preventDefault()});const l=Me.exports.jsx,b=Me.exports.jsxs,Oe=Me.exports.Fragment,It={className:"sister_toast",duration:5e3,style:{background:"#121212",color:"#fff"},icon:l("img",{src:"sister_captain.svg",style:{width:"50%",maxWidth:125}}),success:{duration:2500},error:{}},jt=dt(({state:r})=>{var t,i,o,p,c,n,d,m;const[e,s]=Pe.exports.useState();return Pe.exports.useEffect(()=>{N("Hello Visitor! This is just a modified test version of this project as it is no longer active. Note many features likely will not work",{duration:1e4})},[]),Pe.exports.useEffect(()=>{var h;((h=r.user)==null?void 0:h.is_new)&&s("overview")},[r.user]),r.inGame?b(Oe,{children:[l("img",{className:"control_button",onClick:()=>r.pause(),src:r.paused?"icons/play.png":"icons/pause.png",alt:"pause/play button",style:{right:40}}),l("img",{className:"control_button",onClick:()=>r.mute(),src:r.muted?"icons/mute.png":"icons/volume.png",alt:"mute button",style:{right:10}})]}):r.loading?l("div",{className:"App",children:l("div",{className:"atom-spinner",children:b("div",{className:"spinner-inner",children:[l("div",{className:"spinner-line"}),l("div",{className:"spinner-line"}),l("div",{className:"spinner-line"}),l("div",{className:"spinner-circle",children:"\u25CF"})]})})}):b("div",{className:"App",children:[r.user&&b(Oe,{children:[l("div",{className:"wallet_modal",children:b("div",{className:"stat_box",children:[l("div",{className:"stat_title",children:r.user.name||`${r.wallet.address.slice(0,4)}...${r.wallet.slice(-4)}`}),l("div",{className:"line"}),b("div",{className:"stat",children:["Lives:\xA0",l("span",{children:(t=r.user)==null?void 0:t.lives})]}),b("div",{className:"stat",children:["Planets Unlocked:\xA0",l("span",{children:(i=r.user)==null?void 0:i.planets.reduce((h,u)=>h+(u.locked?0:1),0)})]}),b("div",{className:"stat",children:["Highscore:\xA0",l("span",{children:(o=r.user)==null?void 0:o.highscore})]}),l("div",{className:"line"}),l("div",{className:"stat_title",children:"Spots Unlocked"}),(p=r.user)==null?void 0:p.planets.map(h=>b("div",{className:"stat",children:[h.name,":",l("span",{children:h.spots})]},h.name+"spots"))]})}),b("div",{className:"stat_box",style:{position:"fixed",top:10,right:10},children:[l("div",{className:"stat_title",children:"Leaderboard"}),l("div",{className:"line"}),r.leaderboard.length===0&&l("div",{className:"leaderboard_player",children:"No Players Yet"})]}),l("div",{style:{fontSize:30,marginBottom:20},children:"Pick Tokens"}),b("div",{className:"carousel",children:[b("div",{className:"boosts",children:[l("div",{className:"stat_title",children:(n=(c=r.sister)==null?void 0:c.data)==null?void 0:n.name}),r.boosts.sister.map(h=>{var u,x;return b("div",{className:"stat",style:{paddingBottom:8},children:[l("span",{style:{textTransform:"uppercase",float:"none"},children:(u=h==null?void 0:h.trait)==null?void 0:u.type}),": ",(x=h==null?void 0:h.trait)==null?void 0:x.value," - ",h.rarity,"% ",b("div",{style:{color:"#9aff58"},children:[JSON.stringify(h.boost,null," ").replace(/\{|\}|"/g,"")," ",h.planet]})]},h.trait.type)}),r.boosts.sister.length===0&&l("div",{className:"stat",children:"No Modifiers"})]}),r.wallet.sisters.length>1&&l("div",{className:"token_arrow",onClick:()=>r.setSister(-1),children:"\u2039"}),l("img",{style:{width:175,height:175,borderRadius:"50%",objectFit:"contain"},alt:(m=(d=r.sister)==null?void 0:d.data)==null?void 0:m.name,src:"https://5yac446q3nw2wc6gtzjg2aat2cyecky6mfo7t3ltclbidu7fvoja.arweave.net/7gAuc9DbbasLxp5SbQAT0LBBKx5hXfntcxLCgdPlq5I"}),r.wallet.sisters.length>1&&l("div",{className:"token_arrow",onClick:()=>r.setSister(1),children:"\u203A"})]}),l("br",{}),l("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:30},children:r.user.planets.map((h,u)=>b("div",{className:"planet_menu",children:[b("div",{children:[b("div",{style:{fontSize:22},children:[b("span",{style:{color:"#afafaf"},children:["World ",u+1]}),l("br",{}),Ne[h.name][0]]}),l("div",{className:h.locked?"":"welcome_button_behind",children:l("div",{className:"wallet-adapter-button wallet-adapter-button-trigger",onClick:()=>{r.planet=h,r.launchGame()},children:h.locked?"Locked":"Play"})})]}),l("img",{src:`planet_gifs/${h.name.toLowerCase()}.gif`,loading:"lazy",style:{width:180,borderRadius:"50%"}})]},h.name))})]}),l("img",{src:"icons/question.png",onClick:()=>s("overview"),style:{position:"fixed",bottom:10,right:10,width:20,cursor:"pointer"}}),e&&l("div",{className:"info_container",children:b("div",{className:"info_menu",children:[l("img",{className:"close",onClick:()=>s(!1),src:"icons/close.png",alt:"close"}),l("h1",{children:"Sisterverse Game"}),b("div",{className:"tabs",children:[l("span",{style:e=="overview"?{color:"#121212",borderColor:"#121212"}:{},onClick:()=>s("overview"),children:"Overview"}),l("span",{style:e=="gameplay"?{color:"#121212",borderColor:"#121212"}:{},onClick:()=>s("gameplay"),children:"Gameplay"})]}),e=="overview"?b("div",{className:"fade-in",children:[b("p",{children:[l("span",{style:{fontSize:22,color:"#121212"},children:"Objective"}),l("br",{}),"Conquer each planet to ",l("span",{style:{fontWeight:"bold"},children:"unlock spots in the Sisterverse"})," and unlock the next planet.",l("br",{}),l("br",{}),"Survive 10 Waves AND collect enough resources to beat each planet.",l("br",{}),l("br",{}),"Watch out for the obstacles! Run into one too many and you'll be sent back to square one."]}),b("p",{children:[l("span",{style:{fontSize:22,color:"#121212"},children:"Modifiers"}),l("br",{}),"Different SolSister and Sisterverse traits yield benefits in game to things like player speed and obstacle size.",l("br",{}),l("br",{}),"For example the Flamethrower Special Item makes the obstacles on icy Oxonia smaller.",l("br",{}),l("br",{}),"Rarer attributes will typically yield greater benefits."]}),b("p",{children:[l("span",{style:{fontSize:22,color:"#121212"},children:"Life Refill"}),l("br",{}),"Lives refill daily based on number of SolSisters in your wallet",l("br",{}),l("br",{}),"Solsisters (1-4): 5 Lives",l("br",{}),"Sister Keeper (4-9): 8 Lives",l("br",{}),"Princess (10-24): 12 Lives",l("br",{}),"Queen (25+): 18 Lives"]}),l("button",{onClick:()=>s(!1),children:"CLOSE"})]},e):b("div",{className:"fade-in",children:[b("p",{children:[l("span",{style:{fontSize:22,color:"#121212"},children:"Controls"}),l("br",{}),"Arrow keys: Player Movement",l("br",{}),"Space Bar: Use Boost",l("br",{}),"P Key: Pause/Resume",l("br",{}),l("br",{}),l("span",{style:{fontSize:10,fontStyle:"italic"},children:"The game also supports most standard USB gamepads"})]}),b("p",{children:[l("span",{style:{fontSize:22,color:"#121212"},children:"Avoid"}),l("br",{}),"Every planet has different hazards based on their environment"]}),b("p",{children:[l("span",{style:{fontSize:22,color:"#121212"},children:"Collect"}),l("br",{}),"Each planet has a different resource you must collect"]}),b("p",{children:[l("span",{style:{fontSize:22,color:"#121212"},children:"HUD"}),l("br",{}),"Keep an eye on your health, progress, and more in the top left",l("br",{}),l("img",{src:"hud.png",style:{width:"95%",borderRadius:8}})]}),l("button",{onClick:()=>s(!1),children:"CLOSE"})]},e)]})}),l("a",{href:"https://solsisters.xyz",target:"_blank",referrer:"noreferrer",children:l("img",{src:"icons/logo.png",style:{position:"fixed",bottom:10,left:10,width:20}})}),l("a",{href:"https://alldrit.ca/projects/sisterverse",target:"_blank",referrer:"noreferrer",children:l("img",{src:"icons/galaxy.gif",style:{position:"fixed",bottom:8,left:40,width:20,height:25}})}),l("a",{href:"https://twitter.com/RealSolSisters",target:"_blank",referrer:"noreferrer",children:l("img",{src:"icons/twitter.png",style:{position:"fixed",bottom:10,left:70,width:20}})})]})});function Yt(){return Vt?b("div",{className:"App",children:[l("img",{alt:"SolSisters Logo",src:"logo.png",style:{width:100}}),l("div",{style:{padding:"10vw",textAlign:"center"},children:"Sorry the Sisterverse Game does not support mobile"})]}):b(Oe,{children:[l(jt,{state:a}),l(pt,{position:"top-left",toastOptions:It})]})}ut.render(l(yt.StrictMode,{children:l(Yt,{})}),document.getElementById("root"));
